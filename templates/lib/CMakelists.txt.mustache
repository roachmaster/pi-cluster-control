# THIS FILE IS AUTO-GENERATED BY bootstrap.sh. DO NOT EDIT MANUALLY.

cmake_minimum_required(VERSION {{CMAKE_VERSION}})
project({{CMAKE_PROJECT}})

set(CMAKE_CXX_STANDARD {{CMAKE_CXX_STANDARD}})
set(CMAKE_CXX_STANDARD_REQUIRED ON)

message(STATUS "CMAKE_CURRENT_SOURCE_DIR = ${CMAKE_CURRENT_SOURCE_DIR}")
message(STATUS "CMAKE_SOURCE_DIR         = ${CMAKE_SOURCE_DIR}")
message(STATUS "CMAKE_BINARY_DIR         = ${CMAKE_BINARY_DIR}")
message(STATUS "CMAKE_CURRENT_BINARY_DIR = ${CMAKE_CURRENT_BINARY_DIR}")

# === Library Target ===
add_library({{module_name_snake_case}}_lib
{{#SOURCE_FILES}}
    src/{{.}}
{{/SOURCE_FILES}}
{{^SOURCE_FILES}}
    src/{{module_name_snake_case}}_lib.cpp
{{/SOURCE_FILES}}
)

{{#HAS_PACKAGES}}
# === Module Package Dependencies ===
include(FetchContent)

{{#PACKAGES}}
FetchContent_Declare(
    {{NAME}}
    URL {{{URL}}}
)
{{/PACKAGES}}

FetchContent_MakeAvailable(
{{#PACKAGES}}
    {{NAME}}
{{/PACKAGES}}
)
{{/HAS_PACKAGES}}

# === Include Directories ===
target_include_directories({{module_name_snake_case}}_lib PUBLIC
    ${CMAKE_CURRENT_SOURCE_DIR}/include     # âœ… correct relative to CMakeLists.txt in forge-core
{{#DEPENDS_ON}}
    ${CMAKE_SOURCE_DIR}/{{.}}/include
{{/DEPENDS_ON}}
{{#HAS_PACKAGES}}
{{#PACKAGES}}
    ${CMAKE_BINARY_DIR}/_deps/{{NAME}}-src/{{{INCLUDE}}}
{{/PACKAGES}}
{{/HAS_PACKAGES}}
)

# === Output Path ===
set_target_properties({{module_name_snake_case}}_lib PROPERTIES
    OUTPUT_NAME {{module_name_snake_case}}
    ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib
    LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin
)